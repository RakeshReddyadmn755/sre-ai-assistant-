<FastAPI code from canvas - shortened for readability>